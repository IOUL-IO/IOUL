<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Account Slide Demo</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="account-container">
    <div class="account-text" data-base-left-vw="0">Account Text</div>
    <div class="account-line" data-base-left-vw="0">Account Line</div>
  </div>
  <div class="slide-trigger"></div>
  <div class="slide-trigger-reverse"></div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const DURATION = 300;
      let sliding = false;
      const targets = [
        document.querySelector('.account-text'),
        document.querySelector('.account-line')
      ];

      // Store original positions
      targets.forEach(el => {
        const leftVw = parseFloat(getComputedStyle(el).left);
        el.dataset.baseLeftVw = leftVw;
        el.dataset.slid = 'false';
      });

      // Forward slide function
      function slideOnce() {
        if (sliding || targets[0].dataset.slid === 'true') return;
        sliding = true;
        targets.forEach(el => {
          const base = parseFloat(el.dataset.baseLeftVw);
          el.style.transition = `left ${DURATION}ms ease`;
          el.style.left = `${base + 10}vw`; // example offset
          el.dataset.slid = 'true';
        });
        const poll = setInterval(updateVisibility, 20);
        setTimeout(() => {
          clearInterval(poll);
          updateVisibility();
          sliding = false;
        }, DURATION);
      }

      // Reverse slide function
      function slideBack() {
        if (sliding || targets[0].dataset.slid !== 'true') return;
        sliding = true;
        targets.forEach(el => {
          const base = parseFloat(el.dataset.baseLeftVw);
          el.style.transition = `left ${DURATION}ms ease`;
          el.style.left = `${base}vw`;
          el.dataset.slid = 'false';
        });
        const poll = setInterval(updateVisibility, 20);
        setTimeout(() => {
          clearInterval(poll);
          updateVisibility();
          sliding = false;
        }, DURATION);
      }

      // Visibility update (your existing logic)
      function updateVisibility() {
        targets.forEach(el => {
          const rect = el.getBoundingClientRect();
          el.style.opacity = (rect.left >= 0 && rect.right <= window.innerWidth) ? '1' : '0';
        });
      }

      // Bind triggers
      const forwardTrigger = document.querySelector('.slide-trigger');
      forwardTrigger.addEventListener('click', e => {
        e.stopPropagation();
        slideOnce();
      });

      const reverseTrigger = document.querySelector('.slide-trigger-reverse');
      reverseTrigger.addEventListener('click', e => {
        e.stopPropagation();
        slideBack();
      });
    });
  </script>
</body>
</html>
