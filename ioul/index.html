<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Account Slide and Visibility</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>HEADER</header>
  <main>
    <div class="hover-area"></div>
    <div class="inverse-hover-area"></div>
    <div class="account-wrapper">
      <div class="account-text">AccOUnT nAME</div>
      <div class="account-text">L1nK UP</div>
      <div class="account-text">. . .</div>
      <div class="account-text">0</div>
      <div class="account-line"></div>
    </div>
  </main>

  <!-- account-slide-and-visibility -->
  <script>
    // Constants
    const HIDE_MIN = 6.37, HIDE_MAX = 28.86;
    const TOP_MIN  = 11,   TOP_MAX  = 40;
    const SLIDE_AMOUNT = 60; // in vw

    // Helpers
    const pxToVw = px => (px / window.innerWidth) * 100;
    const pxToVh = px => (px / window.innerHeight) * 100;

    // Targets
    const targets = [
      ...document.querySelectorAll('.account-text'),
      document.querySelector('.account-line'),
    ];

    // Improved visibility check: hides when any part overlaps the hide band
    function updateVisibility() {
      targets.forEach(el => {
        const rect    = el.getBoundingClientRect();
        const leftVw  = pxToVw(rect.left);
        const rightVw = pxToVw(rect.right);
        const topVh   = pxToVh(rect.top);

        // hide if any part of the element overlaps the hide band
        const hideHorizontally = leftVw  <= HIDE_MAX && rightVw >= HIDE_MIN;
        const hideVertically   = topVh   >= TOP_MIN  && topVh   <= TOP_MAX;
        const hide             = hideHorizontally && hideVertically;

        el.style.opacity       = hide ? '0' : '';
        el.style.pointerEvents = hide ? 'none' : '';
      });
    }

    // Initial update & listeners
    updateVisibility();
    window.addEventListener('resize', updateVisibility);

    // Sliding logic
    let sliding = false;
    const slideInTrigger  = document.querySelector('.hover-area');
    const slideOutTrigger = document.querySelector('.inverse-hover-area');

    slideInTrigger.addEventListener('mouseenter', () => {
      if (!sliding) {
        sliding = true;
        targets.forEach(el => {
          const currentLeftVw = pxToVw(el.getBoundingClientRect().left);
          el.style.left = `calc(${currentLeftVw}vw + ${SLIDE_AMOUNT}vw)`;
        });
        setTimeout(() => { sliding = false; updateVisibility(); }, 700);
      }
    });

    slideOutTrigger.addEventListener('mouseenter', () => {
      if (!sliding) {
        sliding = true;
        targets.forEach(el => {
          const currentLeftVw = pxToVw(el.getBoundingClientRect().left);
          el.style.left = `calc(${currentLeftVw}vw - ${SLIDE_AMOUNT}vw)`;
        });
        setTimeout(() => { sliding = false; updateVisibility(); }, 700);
      }
    });
  </script>
  <!-- end account-slide-and-visibility -->
</body>
</html>
