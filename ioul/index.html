<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IOUL</title>
  <link rel="icon" href="favicon.png" type="image/png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="non-fullscreen">
  <div class="layer-one"></div>
  <div class="layer-two"></div>
  <div class="layer-three"></div>

  <div class="page-content">
    <!-- Original lines -->
    <div class="line original"></div>
    <div class="line second"></div>
    <div class="line third"></div>
    <div class="line fourth"></div>

    <!-- Slide-container with dashed lines & time labels -->
    <div class="slide-container">
      <div class="line dashed"></div>
      <div class="line dashed second-dashed"></div>
      <div class="line dashed third-dashed"></div>
      <div class="line dashed fourth-dashed"></div>
      <span class="time-text">10:00&nbsp;&nbsp;&nbsp;&nbsp;AM</span>
      <span class="time-text second-time-text">11:00&nbsp;&nbsp;&nbsp;&nbsp;AM</span>
      <span class="time-text third-time-text">12:00&nbsp;&nbsp;&nbsp;&nbsp;PM</span>
      <span class="time-text fourth-time-text">1:00&nbsp;&nbsp;&nbsp;&nbsp;PM</span>
    </div>

    <div class="hover-area"></div>
    <span class="chat-text" id="chatText">cHAT . . .</span>

    <!-- Grid numbers -->
    <span class="grid-number num1">1</span>
    <span class="grid-number num2">2</span>
    <span class="grid-number num3">3</span>
    <span class="grid-number num4">4</span>
    <span class="grid-number num5">5</span>
    <span class="grid-number num6">6</span>
    <span class="grid-number num7">7</span>
    <span class="grid-number num8">8</span>
    <span class="grid-number num9">9</span>
    <span class="grid-number num10">10</span>
    <span class="grid-number num11">11</span>
    <span class="grid-number num12">12</span>
    <span class="grid-number num13">13</span>
    <span class="grid-number num14">14</span>
    <span class="grid-number num15">15</span>
    <span class="grid-number num16">16</span>

    <!-- Grid dashed lines -->
    <div class="grid-dashed dashed01"></div>
    <div class="grid-dashed dashed02"></div>
    <div class="grid-dashed dashed03"></div>
    <div class="grid-dashed dashed04"></div>
    <div class="grid-dashed dashed05"></div>
    <div class="grid-dashed dashed06"></div>
    <div class="grid-dashed dashed07"></div>
    <div class="grid-dashed dashed08"></div>
    <div class="grid-dashed dashed09"></div>
    <div class="grid-dashed dashed10"></div>
    <div class="grid-dashed dashed11"></div>
    <div class="grid-dashed dashed12"></div>
    <div class="grid-dashed dashed13"></div>
    <div class="grid-dashed dashed14"></div>
    <div class="grid-dashed dashed15"></div>
    <div class="grid-dashed dashed16"></div>

    <!-- Four .menu-item containers at left:29vw (slide to 6.41vw when .open is added) -->
    <div class="menu-item" id="onlineAssetsWrapper" style="top: 35.4vh;">
      <span class="custom-text" style="left: 0;" id="online-assets">-  OnL1nE ASSETS</span>
    </div>
    <div class="menu-item" id="linkupCenterWrapper" style="top: 41.6vh;">
      <span class="custom-text" style="left: 0;" id="linkup-center">-  L1nKUP cEnTER</span>
    </div>
    <div class="menu-item" id="deliveryLineWrapper" style="top: 47.8vh;">
      <span class="custom-text" style="left: 0;" id="delivery-line">-  DEL1VERY L1nE</span>
    </div>
    <div class="menu-item" id="internalUnitWrapper" style="top: 54vh;">
      <span class="custom-text" style="left: 0;" id="internal-unit">-  1nTERnAL Un1T</span>
    </div>

    <!-- Far-left custom-text items from original code -->
    <span class="custom-text" style="top: 35.4vh; left: -42.59vw;">AccOUnT 1nFO</span>
    <span class="custom-text" style="top: 35.4vh; left: -28.22vw;">i-cHAT: OPEn</span>
    <span class="custom-text" style="top: 41.6vh; left: -28.22vw;">i-MAIL: OPEn</span>
    <span class="custom-text" style="top: 41.6vh; left: -42.59vw;">AcT1V1TY 1nFO</span>
    <span class="custom-text" style="top: 54vh; left: -42.59vw;">YOUR L1ST</span>
    <span class="custom-text" style="top: 60.2vh; left: -42.59vw;">cHAnnELS</span>
    <span class="custom-text" style="top: 66.4vh; left: -42.59vw;">OFFER HUB</span>
    <span class="custom-text" style="top: 72.6vh; left: -42.59vw;">YOUR JOBS</span>
    <span class="custom-text" style="top: 54vh; left: -23.29vw;">OPEn</span>
    <span class="custom-text" style="top: 60.2vh; left: -23.29vw;">OPEn</span>
    <span class="custom-text" style="top: 66.4vh; left: -23.29vw;">OPEn</span>
    <span class="custom-text" style="top: 72.6vh; left: -23.29vw;">OPEn</span>

    <div class="custom-line"></div>

    <!-- Slide triggers -->
    <div class="slide-trigger"></div>
    <div class="slide-trigger-reverse"></div>
  </div>

  <!-- Script #1: Page fade-in, fullscreen logic, chat text, triggers, etc. -->
  <script>
    const pageContent = document.querySelector('.page-content');
    let pageFadedIn = false;
    function fadeInPage() {
      pageContent.style.opacity = '1';
      pageFadedIn = true;
    }
    document.addEventListener('mousemove', function onFirstMouseMove() {
      if (!pageFadedIn) {
        fadeInPage();
      }
      document.removeEventListener('mousemove', onFirstMouseMove);
    });

    const EDGE_MARGIN = 11;
    document.addEventListener('click', (event) => {
      const { clientX: x, clientY: y } = event;
      const { innerWidth: width, innerHeight: height } = window;
      if (
        !document.fullscreenElement &&
        (x <= EDGE_MARGIN || x >= width - EDGE_MARGIN ||
         y <= EDGE_MARGIN || y >= height - EDGE_MARGIN)
      ) {
        document.documentElement.requestFullscreen();
      }
    });

    const inverseTrigger = document.querySelector('.slide-trigger');
    inverseTrigger.addEventListener('click', (event) => {
      // Inverse the big "slide-container" animation
      event.stopPropagation();
      document.querySelector('.slide-container').classList.remove('animate-slide');
      document.querySelector('.page-content').classList.remove('animate-grid');
    });
    const forwardTrigger = document.querySelector('.slide-trigger-reverse');
    forwardTrigger.addEventListener('click', (event) => {
      // Re-apply the big "slide-container" animation
      event.stopPropagation();
      document.querySelector('.slide-container').classList.add('animate-slide');
      document.querySelector('.page-content').classList.add('animate-grid');
    });

    const chatText = document.getElementById('chatText');
    let chatShownOnce = false;
    const hoverArea = document.querySelector('.hover-area');
    hoverArea.addEventListener('mouseenter', () => {
      if (!chatShownOnce && pageFadedIn) {
        chatText.style.opacity = '1';
        chatShownOnce = true;
      }
    });
    chatText.addEventListener('click', () => {
      const chatInput = document.createElement('input');
      chatInput.type = 'text';
      chatInput.classList.add('chat-input');
      chatText.insertAdjacentElement('afterend', chatInput);
      chatText.remove();
      chatInput.focus();
    });

    // If user clicks far-left (0..6.37vw), fade out chat text and shift custom texts
    document.addEventListener('click', (event) => {
      const vwUnit = window.innerWidth / 100;
      const vhUnit = window.innerHeight / 100;
      const xLimit = 6.37 * vwUnit;
      const yMin = 28.5 * vhUnit;
      const yMax = 84 * vhUnit;

      // Left bounding box
      if (
        event.clientX >= 0 && event.clientX <= xLimit &&
        event.clientY >= yMin && event.clientY <= yMax
      ) {
        const chatTextEl = document.querySelector('.chat-text');
        if (chatTextEl) {
          chatTextEl.style.transition = "opacity 0.1s ease";
          chatTextEl.style.opacity = "0";
          setTimeout(() => {
            chatTextEl.classList.add('chat-slide');
          }, 110);
        }
        const chatInputEl = document.querySelector('.chat-input');
        if (chatInputEl) {
          chatInputEl.classList.add('chat-slide');
        }
        const customTextEls = document.querySelectorAll('.custom-text');
        customTextEls.forEach(el => {
          el.classList.add('custom-slide');
        });
        const customLineEl = document.querySelector('.custom-line');
        if (customLineEl) {
          customLineEl.classList.add('custom-slide');
        }
      }
    });
  </script>

  <!-- Script #2: Submenu toggles + the UNIFIED middle bounding-box logic -->
  <script>
    // 1) Submenu logic remains the same, minus any stopPropagation()
    function addNewText(containerID, text, top, left) {
      let span = document.createElement("span");
      span.className = "custom-text new-text";
      span.style.top = top + "vh";
      span.style.left = left + "vw";
      document.getElementById(containerID).appendChild(span);
      setTimeout(() => {
        span.classList.add("visible");
      }, 10);
    }

    let currentMenu = null;

    function closeSubmenu() {
      const newTexts = document.querySelectorAll('.new-text');
      newTexts.forEach(span => {
        span.style.transition = 'opacity 0.3s ease';
        span.classList.remove("visible");
      });
      setTimeout(() => {
        document.getElementById("linkup-center").classList.remove("slide-down");
        document.getElementById("delivery-line").classList.remove("slide-down");
        document.getElementById("internal-unit").classList.remove("slide-down");
        newTexts.forEach(span => span.remove());

        // remove .open from whichever was open
        if (currentMenu) {
          const wrapperDiv = document.getElementById(currentMenu + "Wrapper");
          if (wrapperDiv) {
            wrapperDiv.classList.remove("open");
          }
        }
        currentMenu = null;
      }, 300);
    }

    function openOnlineAssets() {
      document.getElementById("onlineAssetsWrapper").classList.add("open");
      document.getElementById("linkup-center").classList.add("slide-down");
      document.getElementById("delivery-line").classList.add("slide-down");
      document.getElementById("internal-unit").classList.add("slide-down");
      setTimeout(() => {
        addNewText("onlineAssetsWrapper", "cOnTEnT", 41.6, 7.4);
        addNewText("onlineAssetsWrapper", "LEARn1ng", 47.8, 7.4);
      }, 700);
    }
    function openLinkupCenter() {
      document.getElementById("linkupCenterWrapper").classList.add("open");
      document.getElementById("delivery-line").classList.add("slide-down");
      document.getElementById("internal-unit").classList.add("slide-down");
      setTimeout(() => {
        addNewText("linkupCenterWrapper", "cHAnnELS", 47.8, 7.4);
        addNewText("linkupCenterWrapper", "LABOUR", 54, 7.4);
      }, 700);
    }
    function openDeliveryLine() {
      document.getElementById("deliveryLineWrapper").classList.add("open");
      document.getElementById("internal-unit").classList.add("slide-down");
      setTimeout(() => {
        addNewText("deliveryLineWrapper", "cL1ENTS", 54, 7.4);
        addNewText("deliveryLineWrapper", "PROJEcTS", 60.2, 7.4);
      }, 700);
    }
    function openInternalUnit() {
      document.getElementById("internalUnitWrapper").classList.add("open");
      setTimeout(() => {
        addNewText("internalUnitWrapper", "1nVEnTORY", 60.2, 7.4);
        addNewText("internalUnitWrapper", "DEVOPS", 66.4, 7.4);
        addNewText("internalUnitWrapper", "F1nAncES", 72.6, 7.4);
        addNewText("internalUnitWrapper", "1T-cEnTER", 78.8, 7.4);
      }, 700);
    }

    document.getElementById("online-assets").addEventListener("click", function(e) {
      // no stopPropagation so it can bubble if needed
      if (currentMenu === "online-assets") {
        closeSubmenu();
      } else {
        if (currentMenu !== null) {
          closeSubmenu();
          setTimeout(() => {
            openOnlineAssets();
            currentMenu = "online-assets";
          }, 300);
        } else {
          openOnlineAssets();
          currentMenu = "online-assets";
        }
      }
    });
    document.getElementById("linkup-center").addEventListener("click", function(e) {
      if (currentMenu === "linkup-center") {
        closeSubmenu();
      } else {
        if (currentMenu !== null) {
          closeSubmenu();
          setTimeout(() => {
            openLinkupCenter();
            currentMenu = "linkup-center";
          }, 300);
        } else {
          openLinkupCenter();
          currentMenu = "linkup-center";
        }
      }
    });
    document.getElementById("delivery-line").addEventListener("click", function(e) {
      if (currentMenu === "delivery-line") {
        closeSubmenu();
      } else {
        if (currentMenu !== null) {
          closeSubmenu();
          setTimeout(() => {
            openDeliveryLine();
            currentMenu = "delivery-line";
          }, 300);
        } else {
          openDeliveryLine();
          currentMenu = "delivery-line";
        }
      }
    });
    document.getElementById("internal-unit").addEventListener("click", function(e) {
      if (currentMenu === "internal-unit") {
        closeSubmenu();
      } else {
        if (currentMenu !== null) {
          closeSubmenu();
          setTimeout(() => {
            openInternalUnit();
            currentMenu = "internal-unit";
          }, 300);
        } else {
          openInternalUnit();
          currentMenu = "internal-unit";
        }
      }
    });

    // 2) UNIFIED MIDDLE BOUNDING-BOX LOGIC
    // If user clicks in left:28.86..32.43vw, top:28.5..84vh
    //   - If chat-text is STILL in original position (no .chat-slide),
    //     slide all menu items from 29vw -> 6.41vw
    //   - If chat-text is ALREADY slid out (has .chat-slide),
    //     we revert that chat text/cust text back, ignoring the menu items
    document.addEventListener('click', (event) => {
      const vwUnit = window.innerWidth / 100;
      const vhUnit = window.innerHeight / 100;
      const leftMin = 28.86 * vwUnit;
      const leftMax = 32.43 * vwUnit;
      const yMin = 28.5 * vhUnit;
      const yMax = 84 * vhUnit;

      if (
        event.clientX >= leftMin && event.clientX <= leftMax &&
        event.clientY >= yMin && event.clientY <= yMax
      ) {
        // Check if chat text is slid out or not
        const chatTextEl = document.querySelector('.chat-text');
        const chatInputEl = document.querySelector('.chat-input');
        const customTextEls = document.querySelectorAll('.custom-text');
        const customLineEl = document.querySelector('.custom-line');

        // if we see .chat-slide on them => the user previously clicked left area
        let chatIsSlidOut = false;
        if ((chatTextEl && chatTextEl.classList.contains('chat-slide')) ||
            (chatInputEl && chatInputEl.classList.contains('chat-slide'))) {
          chatIsSlidOut = true;
        }

        if (!chatIsSlidOut) {
          // Chat is in original position => let's slide all menu items
          document.getElementById("onlineAssetsWrapper").classList.add("open");
          document.getElementById("linkupCenterWrapper").classList.add("open");
          document.getElementById("deliveryLineWrapper").classList.add("open");
          document.getElementById("internalUnitWrapper").classList.add("open");

        } else {
          // Chat is slid out => so let's "invert" that chat animation, bringing it back
          if (chatTextEl) {
            chatTextEl.classList.remove('chat-slide');
            setTimeout(() => {
              chatTextEl.style.opacity = "1";
            }, 700);
          }
          if (chatInputEl) {
            chatInputEl.classList.remove('chat-slide');
          }
          customTextEls.forEach(el => {
            el.classList.remove('custom-slide');
            el.style.transition = "transform 0.7s ease";
          });
          if (customLineEl) {
            customLineEl.classList.remove('custom-slide');
            customLineEl.style.transition = "transform 0.7s ease";
          }
        }
      }
    });
  </script>
</body>
</html>
