<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IOUL</title>
  <link rel="icon" href="favicon.png" type="image/png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="non-fullscreen">
  <div class="layer-one"></div>
  <div class="layer-two"></div>
  <div class="layer-three"></div>

  <div class="page-content" style="opacity:0; transition: opacity 0.5s ease;">
    <!-- … your existing structure … -->

    <!-- CHAT text -->
    <span class="chat-text" id="chatText" style="position:absolute; top:XXvh; left:YYvw; opacity:0; pointer-events:none;">
      …chat prompt…
    </span>

    <!-- Mail fields (hidden initially) -->
    <span class="mail-text" id="toText" style="position:absolute; top:35.4vh; left:36vw; opacity:0; pointer-events:none;">TO:</span>
    <span class="mail-text" id="subjectText" style="position:absolute; top:41.6vh; left:36vw; opacity:0; pointer-events:none;">SUBJECT:</span>
    <div class="underline" id="customLine2" style="position:absolute; top:47.8vh; left:36vw; width:57.8vw; height:1px; background-color:rgba(230,230,230,0.28); opacity:0; transition: opacity 0.3s ease; pointer-events:none;"></div>

    <!-- hover-area overlay (invisible) -->
    <div class="hover-area" style="position:absolute; top:28.5vh; left:36vw; width:58vw; height:55.5vh;"></div>

    <!-- … rest of your content … -->
  </div>

  <div class="slide-triggers">
    <div class="slide-trigger"></div>
    <div class="slide-trigger-reverse"></div>
  </div>

  <script>
    // --- Page fade-in on first mousemove ---
    const pageContent = document.querySelector('.page-content');
    let pageFadedIn = false;
    document.addEventListener('mousemove', function once() {
      if (!pageFadedIn) {
        pageContent.style.opacity = '1';
        pageFadedIn = true;
      }
      document.removeEventListener('mousemove', once);
    });

    // --- Element refs & flags ---
    const chatText    = document.getElementById('chatText');
    const toText      = document.getElementById('toText');
    const subjectText = document.getElementById('subjectText');
    const underline2  = document.getElementById('customLine2');
    const hoverArea   = document.querySelector('.hover-area');

    let chatShown = false;
    let mailShown = false;

    // --- Region-based hover for chat + mail fields ---
    document.addEventListener('mousemove', (e) => {
      if (!pageFadedIn) return;

      const rect = hoverArea.getBoundingClientRect();
      const inside =
        e.clientX >= rect.left &&
        e.clientX <= rect.right &&
        e.clientY >= rect.top  &&
        e.clientY <= rect.bottom;

      if (inside) {
        if (!chatShown) {
          chatText.style.opacity = '1';
          chatText.style.pointerEvents = 'auto';
          chatText.style.zIndex = '10';
          chatShown = true;
        }
        if (!mailShown) {
          [toText, subjectText].forEach(el => {
            el.style.opacity = '1';
            el.style.pointerEvents = 'auto';
            el.style.zIndex = '10';
          });
          underline2.style.opacity = '1';
          mailShown = true;
        }
      }
    });

    // --- Click handlers to swap span → input ---
    function enableInputSwap(spanEl, topVH) {
      spanEl.addEventListener('click', (ev) => {
        ev.stopPropagation();
        const input = document.createElement('input');
        input.type = 'text';
        input.className = 'chat-input';
        input.style.position = 'absolute';
        input.style.top      = topVH + 'vh';
        input.style.left     = '36vw';
        input.style.width    = '57.8vw';
        input.style.zIndex   = '11';
        spanEl.replaceWith(input);
        input.focus();
      });
    }
    enableInputSwap(toText,      35.4);
    enableInputSwap(subjectText, 41.6);
  </script>
</body>
</html>