<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IOUL</title>
  <link rel="icon" href="favicon.png" type="image/png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="non-fullscreen">
  <div class="layer-one"></div>
  <div class="layer-two"></div>
  <div class="layer-three"></div>

  <div class="page-content">
    <!-- Main menu items (unchanged) -->
    <div class="menu-items">
      <span class="custom-text menu-item" style="top: 36.1vh; left: 29vw;" id="online-assets">OnL1nE ASSETS</span>
      <span class="custom-text menu-item" style="top: 43.2vh; left: 29vw;" id="linkup-center">L1nKUP cEnTER</span>
      <span class="custom-text menu-item" style="top: 50.3vh; left: 29vw;" id="delivery-line">DEL1VERY L1nE</span>
      <span class="custom-text menu-item" style="top: 57.4vh; left: 29vw;" id="internal-unit">1nTERnAL Un1T</span>
    </div>

    <!-- The covering layer -->
    <div class="layer-four"></div>

    <!-- Container for all other content -->
    <div class="other-content">
      <div class="line original"></div>
      <div class="line second"></div>
      <div class="line third"></div>
      <div class="line fourth"></div>

      <div class="slide-container">
        <div class="line dashed"></div>
        <div class="line dashed second-dashed"></div>
        <div class="line dashed third-dashed"></div>
        <div class="line dashed fourth-dashed"></div>
        <span class="time-text">10:00&nbsp;&nbsp;&nbsp;&nbsp;AM</span>
        <span class="time-text second-time-text">11:00&nbsp;&nbsp;&nbsp;&nbsp;AM</span>
        <span class="time-text third-time-text">12:00&nbsp;&nbsp;&nbsp;&nbsp;PM</span>
        <span class="time-text fourth-time-text">1:00&nbsp;&nbsp;&nbsp;&nbsp;PM</span>
      </div>

      <!-- Chat area -->
      <div class="hover-area"></div>
      <span class="chat-text" id="chatText">cHAT . . .</span>

      <!-- Optional headings at negative left (unchanged) -->
      <span class="custom-text" style="top: 35.4vh; left: -42.59vw;">AccOUnT 1nFO</span>
      <span class="custom-text" style="top: 41.6vh; left: -42.59vw;">AcT1V1TY 1nFO</span>
      <span class="custom-text" style="top: 54vh;   left: -42.59vw;">YOUR L1ST</span>
      <span class="custom-text" style="top: 60.2vh; left: -42.59vw;">cHAnnELS</span>
      <span class="custom-text" style="top: 66.4vh; left: -42.59vw;">OFFER HUB</span>
      <span class="custom-text" style="top: 72.6vh; left: -42.59vw;">YOUR JOBS</span>

      <!-- 
        Account items now wrapped in containers. 
        Each starts at its original negative left. 
        We'll slide them by +49vw in JS, 
        then pin their right edge to 28.81vw 
      -->
      <div class="account-container" style="top: 35.4vh; left: -25.62vw;" data-slide-group="account">
        <span class="custom-text right-flow" style="position: absolute; right: 0;">
          i-cHAT: 0
        </span>
      </div>

      <div class="account-container" style="top: 41.6vh; left: -25.62vw;" data-slide-group="account">
        <span class="custom-text right-flow" style="position: absolute; right: 0;">
          i-MAIL: 0
        </span>
      </div>

      <div class="account-container" style="top: 54vh;   left: -20.67vw;" data-slide-group="account">
        <span class="custom-text right-flow" style="position: absolute; right: 0;">
          0
        </span>
      </div>

      <div class="account-container" style="top: 60.2vh; left: -20.67vw;" data-slide-group="account">
        <span class="custom-text right-flow" style="position: absolute; right: 0;">
          0
        </span>
      </div>

      <div class="account-container" style="top: 66.4vh; left: -20.67vw;" data-slide-group="account">
        <span class="custom-text right-flow" style="position: absolute; right: 0;">
          0
        </span>
      </div>

      <div class="account-container" style="top: 72.6vh; left: -20.67vw;" data-slide-group="account">
        <span class="custom-text right-flow" style="position: absolute; right: 0;">
          0
        </span>
      </div>

      <div class="custom-line" style="left: -42.59vw;"></div>
    </div>
  </div>

  <div class="slide-triggers">
    <div class="slide-trigger"></div>
    <div class="slide-trigger-reverse"></div>
  </div>

  <script>
    // ----- Fade-in & fullscreen behavior -----
    const pageContent = document.querySelector('.page-content');
    let pageFadedIn = false;
    function fadeInPage() {
      pageContent.style.opacity = '1';
      pageFadedIn = true;
    }
    document.addEventListener('mousemove', function onFirstMouseMove() {
      if (!pageFadedIn) { fadeInPage(); }
      document.removeEventListener('mousemove', onFirstMouseMove);
    });
    const EDGE_MARGIN = 11;
    document.addEventListener('click', (event) => {
      const { clientX: x, clientY: y } = event;
      const { innerWidth: width, innerHeight: height } = window;
      if (!document.fullscreenElement &&
          (x <= EDGE_MARGIN || x >= width - EDGE_MARGIN ||
           y <= EDGE_MARGIN || y >= height - EDGE_MARGIN)) {
        document.documentElement.requestFullscreen();
      }
    });
    
    let slideState = "none";
    
    // ----- Region: Left 0–6.37vw (28.5–84vh) => slide the account items -----
    document.addEventListener('click', (event) => {
      if (event.target.closest('.chat-text')) return;
      const vwUnit = window.innerWidth / 100;
      const vhUnit = window.innerHeight / 100;
      const leftMin = 0;
      const leftMax = 6.37 * vwUnit;
      const yMin = 28.5 * vhUnit;
      const yMax = 84 * vhUnit;

      if (event.clientX >= leftMin && event.clientX <= leftMax &&
          event.clientY >= yMin && event.clientY <= yMax) {
        if (slideState === "menu") {
          // Return menu items
          document.querySelectorAll('.menu-items .menu-item').forEach(el => {
            el.classList.remove('menu-slide');
          });
          document.querySelector('.menu-items').classList.remove('raised');
          const chatTextEl = document.getElementById('chatText');
          if (chatTextEl) {
            setTimeout(() => {
              chatTextEl.style.transition = "opacity 0.7s ease";
              chatTextEl.style.opacity = "1";
            }, 700);
          }
          slideState = "none";
        } else if (slideState === "account") {
          // Slide account items back
          document.querySelectorAll('.other-content > .custom-text:not(.menu-item)').forEach(el => {
            if (el.dataset.originalLeft) {
              el.style.left = el.dataset.originalLeft;
            }
          });
          // The container approach => return each container as well:
          document.querySelectorAll('.account-container[data-slide-group="account"]').forEach(box => {
            if (box.dataset.originalLeft) {
              box.style.left = box.dataset.originalLeft;
            }
            // remove width (so it doesn't chop the text)
            box.style.width = '';
          });

          const customLine = document.querySelector('.custom-line');
          if (customLine && customLine.dataset.originalLeft) {
            customLine.style.left = customLine.dataset.originalLeft;
          }
          const chatTextEl = document.getElementById('chatText');
          if (chatTextEl) {
            setTimeout(() => {
              chatTextEl.style.transition = "opacity 0.7s ease";
              chatTextEl.style.opacity = "1";
            }, 700);
          }
          slideState = "none";
        } else if (slideState === "none") {
          // Slide the account items to the right (+49vw)
          const chatTextEl = document.getElementById('chatText');
          if (chatTextEl) {
            chatTextEl.style.transition = "opacity 0.1s ease";
            chatTextEl.style.opacity = "0";

            setTimeout(() => {
              // Save original left if not set, then shift each item
              document.querySelectorAll('.other-content > .custom-text:not(.menu-item)').forEach(el => {
                if (!el.dataset.originalLeft) {
                  el.dataset.originalLeft = el.style.left;
                }
                let original = parseFloat(el.dataset.originalLeft);
                el.style.left = (original + 49) + "vw";
              });

              // Also shift each .account-container
              document.querySelectorAll('.account-container[data-slide-group="account"]').forEach(box => {
                if (!box.dataset.originalLeft) {
                  box.dataset.originalLeft = box.style.left;
                }
                let originalBoxLeft = parseFloat(box.dataset.originalLeft);
                box.style.left = (originalBoxLeft + 49) + "vw";
              });

              const customLine = document.querySelector('.custom-line');
              if (customLine) {
                if (!customLine.dataset.originalLeft) {
                  customLine.dataset.originalLeft = customLine.style.left;
                }
                let originalLine = parseFloat(customLine.dataset.originalLeft);
                customLine.style.left = (originalLine + 49) + "vw";
              }

              // After the 0.7s transition, pin each box's right edge to 28.81vw
              setTimeout(() => {
                fixAccountRightEdges();
              }, 700);

            }, 110);
          }
          slideState = "account";
        }
      }
    });
    
    // ----- Region: Left 28.86–32.43vw (28.5–84vh) => slide the menu items -----
    document.addEventListener('click', (event) => {
      if (event.target.closest('.chat-text') || event.target.closest('.chat-input')) return;
      const vwUnit = window.innerWidth / 100;
      const vhUnit = window.innerHeight / 100;
      const leftMin = 28.86 * vwUnit;
      const leftMax = 32.43 * vwUnit;
      const yMin = 28.5 * vhUnit;
      const yMax = 84 * vhUnit;

      if (event.clientX >= leftMin && event.clientX <= leftMax &&
          event.clientY >= yMin && event.clientY <= yMax) {
        if (slideState === "menu") {
          // Already slid, do nothing
          return;
        } else if (slideState === "account") {
          // Slide account items back
          document.querySelectorAll('.other-content > .custom-text:not(.menu-item)').forEach(el => {
            if (el.dataset.originalLeft) {
              el.style.left = el.dataset.originalLeft;
            }
          });
          // Return each account container to original left
          document.querySelectorAll('.account-container[data-slide-group="account"]').forEach(box => {
            if (box.dataset.originalLeft) {
              box.style.left = box.dataset.originalLeft;
            }
            box.style.width = '';
          });

          const customLine = document.querySelector('.custom-line');
          if (customLine && customLine.dataset.originalLeft) {
            customLine.style.left = customLine.dataset.originalLeft;
          }
          const chatTextEl = document.getElementById('chatText');
          if (chatTextEl) {
            setTimeout(() => {
              chatTextEl.style.transition = "opacity 0.7s ease";
              chatTextEl.style.opacity = "1";
            }, 700);
          }
          slideState = "none";
        } else if (slideState === "none") {
          // Slide menu items in
          const chatTextEl = document.getElementById('chatText');
          if (chatTextEl) {
            chatTextEl.style.transition = "opacity 0.1s ease";
            chatTextEl.style.opacity = "0";
            setTimeout(() => {
              document.querySelectorAll('.menu-items .menu-item').forEach(el => {
                el.classList.add('menu-slide');
              });
              setTimeout(() => {
                document.querySelector('.menu-items').classList.add('raised');
              }, 700);
            }, 110);
          }
          slideState = "menu";
        }
      }
    });
    
    const inverseTrigger = document.querySelector('.slide-trigger');
    inverseTrigger.addEventListener('click', (event) => {
      event.stopPropagation();
      document.querySelector('.slide-container').classList.remove('animate-slide');
      document.querySelector('.other-content').classList.remove('animate-grid');
    });
    
    const forwardTrigger = document.querySelector('.slide-trigger-reverse');
    forwardTrigger.addEventListener('click', (event) => {
      event.stopPropagation();
      document.querySelector('.slide-container').classList.add('animate-slide');
      document.querySelector('.other-content').classList.add('animate-grid');
    });
    
    const chatText = document.getElementById('chatText');
    chatText.style.pointerEvents = 'none';
    chatText.style.zIndex = '-1';
    let chatShownOnce = false;
    const hoverArea = document.querySelector('.hover-area');
    document.addEventListener('mousemove', (event) => {
      if (!chatShownOnce && pageFadedIn) {
        const rect = hoverArea.getBoundingClientRect();
        if (event.clientX >= rect.left && event.clientX <= rect.right &&
            event.clientY >= rect.top && event.clientY <= rect.bottom) {
          chatText.style.opacity = '1';
          chatText.style.pointerEvents = 'auto';
          chatText.style.zIndex = '10';
          chatShownOnce = true;
        }
      }
    });
    chatText.addEventListener('click', (event) => {
      event.stopPropagation();
      const chatInput = document.createElement('input');
      chatInput.type = 'text';
      chatInput.classList.add('chat-input');
      chatInput.id = 'chatText';
      chatText.replaceWith(chatInput);
      chatInput.focus();
    });

    // Once the accounts are slid +49vw and the transition is done,
    // we call this to fix each container's right edge at left: 28.81vw
    function fixAccountRightEdges() {
      const accountBoxes = document.querySelectorAll('.account-container[data-slide-group="account"]');
      accountBoxes.forEach(box => {
        // read its final left in vw
        const finalLeftVw = parseFloat(box.style.left) || 0;
        // compute width needed so right edge = 28.81
        const neededWidth = 28.81 - finalLeftVw;
        // if that is positive, set it
        if (neededWidth > 0) {
          box.style.width = neededWidth + 'vw';
        }
      });
    }

    // Submenu logic (unchanged, for your convenience)
    let currentMenu = null;
    function closeSubmenu() {
      const newTexts = document.querySelectorAll('.new-text');
      newTexts.forEach(span => {
        span.style.transition = 'opacity 0.3s ease';
        span.classList.remove("visible");
      });
      setTimeout(() => {
        document.getElementById("linkup-center").classList.remove("slide-down");
        document.getElementById("delivery-line").classList.remove("slide-down");
        document.getElementById("internal-unit").classList.remove("slide-down");
        newTexts.forEach(span => span.remove());
        currentMenu = null;
      }, 300);
    }
    function addNewText(text, top, left) {
      let span = document.createElement("span");
      span.className = "custom-text new-text";
      span.style.top = top + "vh";
      span.style.left = left + "vw";
      span.textContent = text;
      document.querySelector(".other-content").appendChild(span);
      setTimeout(() => {
        span.classList.add("visible");
      }, 10);
    }
    function openOnlineAssets() {
      document.getElementById("linkup-center").classList.add("slide-down");
      document.getElementById("delivery-line").classList.add("slide-down");
      document.getElementById("internal-unit").classList.add("slide-down");
      setTimeout(() => {
        addNewText("- cOnTEnT", 41, 7.41);
        addNewText("- LEARn1ng", 45.9, 7.41);
      }, 700);
    }
    function openLinkupCenter() {
      document.getElementById("delivery-line").classList.add("slide-down");
      document.getElementById("internal-unit").classList.add("slide-down");
      setTimeout(() => {
        addNewText("- cHAnnELS", 48.1, 7.41);
        addNewText("- LABOUR", 53, 7.41);
      }, 700);
    }
    function openDeliveryLine() {
      document.getElementById("internal-unit").classList.add("slide-down");
      setTimeout(() => {
        addNewText("- cL1EnTS", 55.2, 7.41);
        addNewText("- PROJEcTS", 60.1, 7.41);
      }, 700);
    }
    function openInternalUnit() {
      setTimeout(() => {
        addNewText("- 1nVEnTORY", 62.3, 7.41);
        addNewText("- DEVOPS", 67.2, 7.41);
        addNewText("- F1nAncES", 72.1, 7.41);
        addNewText("- 1T-cEnTER", 77, 7.41);
      }, 700);
    }
    document.getElementById("online-assets").addEventListener("click", function(e) {
      if (currentMenu === "online-assets") {
        closeSubmenu();
      } else {
        if (currentMenu !== null) {
          closeSubmenu();
          setTimeout(() => {
            openOnlineAssets();
            currentMenu = "online-assets";
          }, 300);
        } else {
          openOnlineAssets();
          currentMenu = "online-assets";
        }
      }
    });
    document.getElementById("linkup-center").addEventListener("click", function(e) {
      e.stopPropagation();
      if (currentMenu === "linkup-center") {
        closeSubmenu();
      } else {
        if (currentMenu !== null) {
          closeSubmenu();
          setTimeout(() => {
            openLinkupCenter();
            currentMenu = "linkup-center";
          }, 300);
        } else {
          openLinkupCenter();
          currentMenu = "linkup-center";
        }
      }
    });
    document.getElementById("delivery-line").addEventListener("click", function(e) {
      e.stopPropagation();
      if (currentMenu === "delivery-line") {
        closeSubmenu();
      } else {
        if (currentMenu !== null) {
          closeSubmenu();
          setTimeout(() => {
            openDeliveryLine();
            currentMenu = "delivery-line";
          }, 300);
        } else {
          openDeliveryLine();
          currentMenu = "delivery-line";
        }
      }
    });
    document.getElementById("internal-unit").addEventListener("click", function(e) {
      e.stopPropagation();
      if (currentMenu === "internal-unit") {
        closeSubmenu();
      } else {
        if (currentMenu !== null) {
          closeSubmenu();
          setTimeout(() => {
            openInternalUnit();
            currentMenu = "internal-unit";
          }, 300);
        } else {
          openInternalUnit();
          currentMenu = "internal-unit";
        }
      }
    });
  </script>
</body>
</html>
